# LLM Provider Configuration
# Set to "ollama" for local LLM or "openrouter" for cloud-based
LLM_PROVIDER=openrouter

# OpenRouter Configuration (when LLM_PROVIDER=openrouter)
# Get your API key from: https://openrouter.ai/keys
OPENROUTER_API_KEY=your-api-key-here

# OpenRouter Model - using free model
DREAM_MODEL=kwaipilot/kat-coder-pro:free

# OpenRouter API Base URL
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# Ollama Configuration (when LLM_PROVIDER=ollama)
# OLLAMA_HOST=http://localhost:11434
# DREAM_MODEL=gemma3:4b

# ==================== Broker & Data Provider Configuration ====================
# Choose your broker and data source providers

# Broker Provider - Where trades are executed
# Options: "paper" (simulated with Yahoo data) or "alpaca" (real broker)
BROKER_PROVIDER=paper

# Data Provider - Where market data comes from  
# Options: "yahoo" (free, 15-min delayed) or "alpaca" (real-time with API keys)
DATA_PROVIDER=yahoo

# Alpaca API Configuration
# Get your keys from: https://app.alpaca.markets/paper/dashboard/overview (paper trading)
# or https://app.alpaca.markets/live/dashboard/overview (live trading)
ALPACA_API_KEY=your-alpaca-api-key-here
ALPACA_SECRET_KEY=your-alpaca-secret-key-here

# Alpaca Trading Mode
# true = Paper trading (sandbox, no real money)
# false = Live trading (REAL MONEY - use with extreme caution!)
ALPACA_PAPER_MODE=true

# Database Configuration
# Leave commented to use default: data/kginvest_live.db
# KGINVEST_DB=./data/kginvest_live.db
DATA_DIR=./data

# Web UI
PORT=5062

# LLM Budget and Settings
LLM_CALLS_PER_MIN=20
LLM_TIMEOUT=45
LLM_TEMP=0.25
LLM_MAX_REASK=1
LLM_MAX_TOKENS=4000

# Trading Configuration
START_CASH=500.0
MIN_TRADE_NOTIONAL=25.0
MAX_BUY_EQUITY_PCT_PER_CYCLE=18.0
MAX_SELL_HOLDING_PCT_PER_CYCLE=35.0
MAX_SYMBOL_WEIGHT_PCT=14.0
MIN_CASH_BUFFER_PCT=12.0
TRADE_ANYTIME=0

# Market Configuration
MARKET_SPEED=0.35
DREAM_SPEED=0.25
THINK_SPEED=0.20

# Bellwether Indicators Configuration
# Two-tier hybrid system for best data quality:
#
# BELLWETHERS = Universal symbols (compatible with both Alpaca and Yahoo)
# These are fetched via your configured DATA_PROVIDER (Alpaca or Yahoo)
# All are tradeable ETFs and stocks that work with any provider
BELLWETHERS=VXX,SPY,QQQ,TLT,UUP,IEF,USO,TSM,VTI
#
# BELLWETHERS_YF = Yahoo-specific symbols (ALWAYS fetched via Yahoo Finance)
# These provide direct indices, futures, and forex that Alpaca doesn't support
# Fetched in parallel regardless of DATA_PROVIDER setting for enhanced signal quality
#
# Why use both? Even when using Alpaca for real-time stock data, you get:
# - Direct VIX index (^VIX) instead of VXX ETF proxy (~20% more accurate)
# - Direct 10Y yield (^TNX) instead of inferring from IEF bond prices
# - Front-month oil futures (CL=F) instead of USO fund with contango decay
# - Dollar index (DX-Y.NYB) for true forex strength
# - S&P 500 index (^GSPC) to verify SPY ETF tracking
#
# Signal computation automatically prefers Yahoo-specific symbols when available,
# falls back to ETF proxies if not (e.g., when Yahoo API is down)
BELLWETHERS_YF=^VIX,^TNX,CL=F,^GSPC,DX-Y.NYB

# Investible Stock Universe (comma-separated tickers for trading)
INVESTIBLES=XLE,XLF,XLV,XME,IYT,AAPL,MSFT,JPM,UNH,CAT,NVDA,AMD,AMZN,GOOGL,META,ARCB,TTMI,TRMK,KWR,ICUI,ACHR,BBAI,ASTS,JOBY,LUNR,OKLO,LAC,INTC,APLD,F,PSNY,PSFE,U,LCID,SMR,WOLF,BYND,AIG

# Portfolio Expansion Configuration (LLM-powered auto-expansion of investibles)
# Enable automatic portfolio expansion when adding new stocks
EXPANSION_ENABLED=true
# Maximum stocks to reach via expansion (1→3→9→27 pattern)
EXPANSION_MAX_STOCKS=27
# Separate LLM call budget for expansion (independent from worker budget)
EXPANSION_LLM_CALLS_PER_MIN=10

# Yahoo Finance
YAHOO_TIMEOUT=12
YAHOO_RANGE_DAYS=90
YAHOO_CACHE_SECONDS=90

# Insight Scoring
STAR_THRESHOLD=0.55
EXPLANATION_MIN_LENGTH=180

# Autonomy Toggles
AUTO_MARKET=1
AUTO_DREAM=1
AUTO_THINK=1
AUTO_TRADE=1

# Options Trading Configuration
# Enable options trading with 10% portfolio allocation
OPTIONS_ENABLED=true
OPTIONS_MAX_ALLOCATION_PCT=10.0
OPTIONS_WORKER_SPEED=0.17
OPTIONS_MIN_VOLUME=500
OPTIONS_MIN_OPEN_INTEREST=1000
OPTIONS_MIN_DTE=14
OPTIONS_MAX_DTE=60
OPTIONS_LLM_CALLS_PER_MIN=5
OPTIONS_MIN_TRADE_NOTIONAL=50.0
OPTIONS_MAX_SINGLE_OPTION_PCT=3.0

# Debug
KGINVEST_DEBUG=true
